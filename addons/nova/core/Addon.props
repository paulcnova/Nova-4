
<Project>
	<PropertyGroup>
		<DefineConstants>$(DefineConstants);Nova_4_CORE</DefineConstants>
	</PropertyGroup>
	
	<Target Name="Zip_Core" AfterTargets="Build">
		<ItemGroup>
			<CoreAddonFiles Include="$(MSBuildThisFileDirectory)/**/*.*"/>
		</ItemGroup>
		
		<RemoveDir Directories="$(MSBuildProjectDirectory)/exports/temp"/>
		<MakeDir Directories="$(MSBuildProjectDirectory)/exports/temp/addons/nova/core"/>
		<Copy
			SourceFiles="@(CoreAddonFiles)"
			DestinationFolder="$(MSBuildProjectDirectory)/exports/temp/addons/nova/core/%(RecursiveDir)"
		/>
		<ZipDirectory
			SourceDirectory="$(MSBuildProjectDirectory)/exports/temp"
			DestinationFile="$(MSBuildProjectDirectory)/exports/core_addon.zip"
			Overwrite="true"
		/>
		<RemoveDir Directories="$(MSBuildProjectDirectory)/exports/temp"/>
	</Target>
</Project>
